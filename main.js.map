{"version":3,"sources":["webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupConfirm.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/pages/index.js"],"names":["formConfig","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","errorInputElementNamePrefix","profileInfoEditButton","document","querySelector","addCardButton","updateAvatarButton","Api","url","headers","this","_url","_headers","res","ok","json","Promise","reject","status","statusText","fetch","then","_onResponse","link","method","body","JSON","stringify","avatar","name","about","cardId","FormValidator","formElement","config","_formElement","_config","_inputElementList","querySelectorAll","_buttonElement","_setEventListeners","inputEvent","Event","forEach","input","dispatchEvent","_toggleButtonState","inputElement","addEventListener","_validateInput","value","_hideInputError","buttonElement","_hasInvalidInput","disabled","classList","add","remove","checkValidity","validity","valid","_showInputError","validationMessage","errorMessage","errorElement","textContent","Section","containerSelector","items","renderer","item","_items","_renderer","_container","redrededItem","addItem","prepend","Card","data","cardTemplateSelector","cardClickHandler","cardLikeHandler","cardDeleteHandler","_cardData","_cardTemplateSelector","_handleCardClick","_handleCardLike","_handleCardDelete","content","cloneNode","_likeButtonElement","_handleLikeButtonClick","_cardImageElement","evt","_removeButtonElement","_id","_remove","bind","id","likeCounterElement","_likeCounterElement","isActive","contains","toggle","_toggleLike","_cardElement","isLikeSet","_getTemplate","likes","length","src","alt","Popup","popupSelector","_popupElement","_handleEscClose","key","close","target","_handleOverlayClose","removeEventListener","PopupWithImage","_imageElement","_imageCaptionElement","PopupWithForm","handleFormSubmit","_handleFormSubmit","_form","_inputList","_submitButton","formData","_buttonTextBackup","values","Object","keys","inputName","preventDefault","_showLoader","_getInputValues","reset","_hideLoader","PopupConfirm","_values","UserInfo","profileNameSelector","profileInfoSelector","profileAvatarSelector","_userNameElement","_userInfoElement","_userAvatarElement","api","authorization","editProfileFormValidator","forms","addCardFormValidator","updateAvatarFormValidator","enableValidation","userInfo","onRequestError","apiErr","msg","console","error","handleCardClick","imageElement","cardTitle","closest","imagePopup","open","handleCardLike","like","removeLike","setLike","card","catch","err","handleCardDelete","removeCardElementHandler","removeCardPopup","buildCard","isLiked","generateCard","cardList","setEventListeners","deleteCard","profileEditPopup","setProfile","setUserInfo","finally","addNewCardPopup","addCard","cardElement","avatarUpdatePopup","updateAvatar","setAvatar","getUserInfo","getCards","cards","user","setItemList","setRenderer","userId","owner","some","didLike","renderElements","setInputValues","notifyFormsAboutInputChange"],"mappings":"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","file":"main.js","sourcesContent":["export const formConfig = {\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__save-button',\n  inactiveButtonClass: 'popup__save-button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__input-error_active',\n  errorInputElementNamePrefix: '.popup__input-error_name_'\n}\n\nexport const profileInfoEditButton = document.querySelector('.profile__edit-button');\nexport const addCardButton = document.querySelector('.profile__add-button');\nexport const updateAvatarButton = document.querySelector('.profile__avatar-button');\n\nexport const apiToken = '9a69937c-ba0b-400f-a7bf-af3d18fbfaea';\nexport const apiBaseUrl = 'https://mesto.nomoreparties.co/v1/cohort-20/';\n","export default class Api {\n  constructor(url, headers) {\n    this._url = url;\n    this._headers = headers;\n  }\n\n  _onResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject({\n      status: res.status,\n      statusText: res.statusText\n    });\n  }\n\n  getCards() {\n    return fetch(`${this._url}cards`, {\n      headers: this._headers\n    })\n    .then(this._onResponse);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}users/me`, {\n      headers: this._headers\n    })\n    .then(this._onResponse)\n  }\n\n  updateAvatar(link) {\n    return fetch(`${this._url}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({avatar: link})\n    })\n    .then(this._onResponse);\n  }\n\n  setProfile(name, about) {\n    return fetch(`${this._url}users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({name, about})\n    })\n    .then(this._onResponse);\n  }\n\n  addCard(name, link) {\n    return fetch(`${this._url}cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({name, link})\n    })\n    .then(this._onResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._onResponse);\n  }\n\n  setLike(cardId) {\n    return fetch(`${this._url}cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n    })\n    .then(this._onResponse);\n  }\n\n  removeLike(cardId) {\n    return fetch(`${this._url}cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._onResponse);\n  }\n}\n","export default class FormValidator {\n  constructor(formElement, config) {\n    this._formElement = formElement;\n    this._config = config;\n\n    this._inputElementList = this._formElement.querySelectorAll(this._config.inputSelector);\n    this._buttonElement = this._formElement.querySelector(this._config.submitButtonSelector);\n  }\n\n  /* Public API */\n  enableValidation() {\n    this._setEventListeners(this._formElement);\n  }\n\n  notifyFormsAboutInputChange() {\n    const inputEvent = new Event('input');\n    this._inputElementList.forEach(input => input.dispatchEvent(inputEvent));\n  }\n\n\n  /* Private methods */\n  _setEventListeners(formElement) {\n    this._toggleButtonState(this._buttonElement);\n\n    this._inputElementList.forEach(inputElement => {\n      inputElement.addEventListener('input', () => {\n        this._validateInput(inputElement);\n        this._toggleButtonState(this._buttonElement);\n      });\n    });\n\n    formElement.addEventListener('reset', () => {\n      this._inputElementList.forEach(inputElement => {\n        inputElement.value = '';\n        this._hideInputError(inputElement)\n      });\n      this._toggleButtonState(this._buttonElement);\n    });\n  }\n\n  _toggleButtonState(buttonElement) {\n    if (this._hasInvalidInput()) {\n      buttonElement.disabled = true;\n      buttonElement.classList.add(this._config.inactiveButtonClass);\n    } else {\n      buttonElement.classList.remove(this._config.inactiveButtonClass);\n      buttonElement.disabled = false;\n    }\n  }\n\n  _hasInvalidInput() {\n    return !this._formElement.checkValidity();\n  }\n\n  _validateInput(inputElement) {\n    if (!inputElement.validity.valid) {\n      this._showInputError(inputElement, inputElement.validationMessage);\n    } else {\n      this._hideInputError(inputElement);\n    }\n  }\n\n  _showInputError(inputElement, errorMessage) {\n    inputElement.classList.add(this._config.inputErrorClass);\n    const errorElement = this._formElement.querySelector(this._config.errorInputElementNamePrefix + inputElement.name);\n    errorElement.textContent = errorMessage;\n    errorElement.classList.add(this._config.errorClass);\n  }\n\n  _hideInputError(inputElement) {\n    const errorElement = this._formElement.querySelector(this._config.errorInputElementNamePrefix + inputElement.name);\n    errorElement.classList.remove(this._config.errorClass);\n    errorElement.textContent = '';\n    inputElement.classList.remove(this._config.inputErrorClass);\n  }\n}\n","export default class Section {\n  constructor(containerSelector, { items = [], renderer = item => item } ) {\n    this._items = items;\n    this._renderer = renderer;\n    this._container = document.querySelector(containerSelector);\n  }\n\n  setItemList(items) {\n    this._items = items;\n    return this;\n  }\n\n  setRenderer(renderer) {\n    this._renderer = renderer;\n    return this;\n  }\n\n  renderElements() {\n    this._items.forEach(item => {\n      const redrededItem = this._renderer(item);\n      this.addItem(redrededItem);\n    });\n  }\n\n  addItem(item) {\n    this._container.prepend(item);\n  }\n}\n","export default class Card {\n\n  constructor(data, cardTemplateSelector = '#card', cardClickHandler, cardLikeHandler, cardDeleteHandler) {\n    this._cardData = data;\n    this._cardTemplateSelector = cardTemplateSelector;\n    this._handleCardClick = cardClickHandler;\n    this._handleCardLike = cardLikeHandler;\n    this._handleCardDelete = cardDeleteHandler;\n  }\n\n  _getTemplate() {\n    const cardElement = document.querySelector(this._cardTemplateSelector)\n            .content\n            .querySelector('.card')\n            .cloneNode(true);\n    return cardElement;\n  }\n\n  _setEventListeners() {\n    this._likeButtonElement.addEventListener('click', () => {\n      this._handleLikeButtonClick();\n    });\n\n    this._cardImageElement.addEventListener('click', evt => {\n      this._handleCardClick(evt);\n    });\n\n    if (this._handleCardDelete) {\n      this._removeButtonElement.addEventListener('click', () => {\n        this._handleCardDelete(this._cardData._id, this._remove.bind(this));\n      });\n    }\n  }\n\n  _handleLikeButtonClick() {\n    this._handleCardLike({\n      id: this._cardData._id,\n      likeCounterElement: this._likeCounterElement,\n      isActive: this._likeButtonElement.classList.contains('card__like-button_active'),\n      toggle: this._toggleLike.bind(this)\n    });\n    this._toggleLike();\n  }\n\n  _toggleLike() {\n    this._likeButtonElement.classList.toggle('card__like-button_active');\n  }\n\n  _remove() {\n    this._cardElement.remove();\n    this._cardElement = null;\n  }\n\n  generateCard(isLikeSet = false) {\n    this._cardElement = this._getTemplate();\n    this._likeButtonElement = this._cardElement.querySelector('.card__like-button');\n    if (isLikeSet) this._likeButtonElement.classList.add('card__like-button_active');\n\n    this._removeButtonElement = this._cardElement.querySelector('.card__remove-button');\n    if (!this._handleCardDelete) {\n      this._removeButtonElement.classList.remove('card__remove-button_visible');\n      this._removeButtonElement.disabled = true;\n    }\n\n    this._cardImageElement = this._cardElement.querySelector('.card__image');\n    this._likeCounterElement = this._cardElement.querySelector('.card__like-counter');\n\n    this._setEventListeners();\n\n    this._cardElement.querySelector('.card__title').textContent = this._cardData.name;\n    this._likeCounterElement.textContent = this._cardData.likes.length;\n    this._cardImageElement.src = this._cardData.link;\n    this._cardImageElement.alt = this._cardData.name;\n\n    return this._cardElement;\n  }\n}\n","export default class Popup {\n  constructor(popupSelector) {\n    this._popupElement = document.querySelector(popupSelector);\n    this._handleEscClose = this._handleEscClose.bind(this);\n  }\n\n  _handleEscClose(evt) {\n    if (evt.key == 'Escape') this.close();\n  }\n\n  _handleOverlayClose(evt) {\n    if (evt.target.classList.contains('popup')) this.close();\n  }\n\n  setEventListeners() {\n    this._popupElement.querySelector('.popup__close-button').addEventListener('click', () => this.close());\n    this._popupElement.addEventListener('click', (evt) => this._handleOverlayClose(evt));\n  }\n\n  open() {\n    document.addEventListener('keydown', this._handleEscClose);\n    this._popupElement.classList.add('popup_opened');\n  }\n\n  close() {\n    this._popupElement.classList.remove('popup_opened');\n    document.removeEventListener('keydown', this._handleEscClose);\n  }\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithImage extends Popup {\n  constructor(containerSelector) {\n    super(containerSelector);\n    this._imageElement = this._popupElement.querySelector('.image-popup__image');\n    this._imageCaptionElement = this._popupElement.querySelector('.image-popup__caption');\n  }\n\n  open(name, link) {\n    this._imageElement.src = link;\n    this._imageElement.alt = name;\n\n    this._imageCaptionElement.textContent = name;\n    super.open();\n  }\n}\n","import Popup from './Popup.js';\n\nexport default class PopupWithForm extends Popup {\n  constructor({ containerSelector, handleFormSubmit }) {\n    super(containerSelector);\n    this._handleFormSubmit = handleFormSubmit;\n    this._form = this._popupElement.querySelector('.popup__form');\n    this._inputList = this._popupElement.querySelectorAll('.popup__input');\n    this._submitButton = this._popupElement.querySelector('.popup__save-button');\n  }\n\n  _getInputValues() {\n    const formData = {};\n    this._inputList.forEach(input => formData[input.name] = input.value);\n    return formData;\n  }\n\n  _showLoader() {\n    this._buttonTextBackup = this._submitButton.textContent;\n    this._submitButton.textContent = 'Сохранение...';\n  }\n\n  _hideLoader() {\n    this._submitButton.textContent = this._buttonTextBackup;\n  }\n\n  setInputValues(values) {\n    Object.keys(values).forEach(inputName => {\n      this._form[inputName].value = values[inputName];\n    });\n  }\n\n  setEventListeners() {\n    super.setEventListeners();\n    this._popupElement.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n      this._showLoader();\n      this._handleFormSubmit(this._getInputValues());\n    });\n  }\n\n  close() {\n    super.close();\n    this._form.reset();\n    this._hideLoader();\n  }\n}\n","import Popup from './Popup.js';\n\nexport default class PopupConfirm extends Popup {\n  constructor({ containerSelector, handleFormSubmit }) {\n    super(containerSelector);\n    this._handleFormSubmit = handleFormSubmit;\n  }\n\n  setEventListeners() {\n    super.setEventListeners();\n    this._popupElement.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n      this._handleFormSubmit(this._values);\n      this.close();\n    });\n  }\n\n  open(values) {\n    super.open();\n    this._values = values;\n  }\n}\n","export default class UserInfo {\n  constructor(profileNameSelector, profileInfoSelector, profileAvatarSelector) {\n    this._userNameElement = document.querySelector(profileNameSelector);\n    this._userInfoElement = document.querySelector(profileInfoSelector);\n    this._userAvatarElement = document.querySelector(profileAvatarSelector);\n  }\n\n  getUserInfo() {\n    return {\n      name: this._userNameElement.textContent,\n      about: this._userInfoElement.textContent\n    }\n  }\n\n  setUserInfo(name, about) {\n    this._userNameElement.textContent = name;\n    this._userInfoElement.textContent = about;\n  }\n\n  setAvatar(link) {\n    this._userAvatarElement.src = link;\n  }\n}\n","import './index.css';\nimport {\n  formConfig,\n  profileInfoEditButton,\n  addCardButton,\n  updateAvatarButton,\n  apiBaseUrl,\n  apiToken\n} from '../utils/constants';\nimport Api from '../components/Api'\nimport FormValidator from '../components/FormValidator';\nimport Section from '../components/Section';\nimport Card from '../components/Card';\nimport PopupWithImage from '../components/PopupWithImage';\nimport PopupWithForm from '../components/PopupWithForm';\nimport PopupConfirm from '../components/PopupConfirm';\nimport UserInfo from '../components/UserInfo';\n\n/* Create API */\nconst api = new Api(apiBaseUrl, {\n  authorization: apiToken,\n  'content-type': 'application/json'\n});\n\n/* Enables forms validation */\nconst editProfileFormValidator = new FormValidator(document.forms['profile-edit-form'], formConfig);\nconst addCardFormValidator = new FormValidator(document.forms['add-card-form'], formConfig);\nconst updateAvatarFormValidator = new FormValidator(document.forms['profile-update-avatar-form'], formConfig);\n\neditProfileFormValidator.enableValidation();\naddCardFormValidator.enableValidation();\nupdateAvatarFormValidator.enableValidation();\n\n\nconst userInfo = new UserInfo('.profile__name', '.profile__activity', '.profile__avatar');\n\nfunction onRequestError(apiErr, msg) {\n  const apiErrorMsg = apiErr\n          ? `${apiErr.status} ${apiErr.statusText}`\n          : null;\n  console.error(msg, apiErr);\n}\n\nfunction handleCardClick(evt) {\n  const imageElement = evt.target;\n  const cardTitle = imageElement.closest('.card')\n          .querySelector('.card__title')\n          .textContent;\n\n  imagePopup.open(cardTitle, imageElement.src);\n}\n\nfunction handleCardLike(like) {\n  let liked = null;\n  if (like.isActive) {\n    liked = api.removeLike(like.id);\n  } else {\n    liked = api.setLike(like.id);\n  }\n\n  liked\n    .then(card => like.likeCounterElement.textContent = card.likes.length)\n    .catch(err => {\n      onRequestError(err, 'Failed to like card.');\n      like.toggle();\n    });\n}\n\nfunction handleCardDelete(cardId, removeCardElementHandler) {\n  removeCardPopup.open({ cardId, remove: removeCardElementHandler });\n}\n\n\nfunction buildCard(item, cardTemplateSelector, cardClickHandler, cardLikeHandler, cardDeleteHandler = null, isLiked = false) {\n  const card = new Card(item, cardTemplateSelector, cardClickHandler, cardLikeHandler, cardDeleteHandler);\n  return card.generateCard(isLiked);\n}\n\nconst cardList = new Section('.places > .cards', {});\n\n\nconst imagePopup = new PopupWithImage('.image-popup');\nimagePopup.setEventListeners();\n\nconst removeCardPopup = new PopupConfirm({\n  containerSelector: '.popup_name_remove-card',\n  handleFormSubmit: ({ cardId, remove }) => {\n    api\n      .deleteCard(cardId)\n      .then(remove)\n      .catch(err => onRequestError(err, 'Failed to remove card.'));\n  }\n});\nremoveCardPopup.setEventListeners();\n\nconst profileEditPopup = new PopupWithForm({\n  containerSelector: '.popup_name_edit-profile',\n  handleFormSubmit: ({ ['profile-name']: name, ['profile-activity']: about }) => {\n    api\n      .setProfile(name, about)\n      .then(res => userInfo.setUserInfo(res.name, res.about))\n      .catch(err => onRequestError(err, 'Failed to edit profile.'))\n      .finally(() => profileEditPopup.close());\n  }\n});\nprofileEditPopup.setEventListeners();\n\nconst addNewCardPopup = new PopupWithForm({\n  containerSelector: '.popup_name_add-card',\n  handleFormSubmit: ({ ['place-name']: name, ['place-image-url']: link }) => {\n    api\n      .addCard(name, link)\n      .then(card => {\n        const cardElement = buildCard(card, '#card', handleCardClick, handleCardLike, handleCardDelete);\n        cardList.addItem(cardElement);\n      })\n      .catch(err => onRequestError(err, 'Failed to add new card.'))\n      .finally(() => addNewCardPopup.close());\n  }\n});\naddNewCardPopup.setEventListeners();\n\nconst avatarUpdatePopup = new PopupWithForm({\n  containerSelector: '.popup_name_update-avatar',\n  handleFormSubmit: ({ ['avatar-link']: link }) => {\n    api\n      .updateAvatar(link)\n      .then(res => userInfo.setAvatar(res.avatar))\n      .catch(err => onRequestError(err, 'Failed to update avatar.'))\n      .finally(() => avatarUpdatePopup.close());\n  }\n});\navatarUpdatePopup.setEventListeners();\n\n\nfunction didLike(card, userId) {\n  return card.likes.some(user => {\n    return user._id == userId;\n  });\n}\n\nfunction isOwner(card, userId) {\n  return card.owner._id == userId;\n}\n\n/* Retrieve user info from the server */\napi\n  .getUserInfo()\n  .then(res => {\n    userInfo.setUserInfo(res.name, res.about)\n    userInfo.setAvatar(res.avatar)\n  })\n  .catch(err => onRequestError(err, 'Failed to get user info.'));\n\n/* Render initial cards */\napi\n  .getCards()\n  .then(cards => {\n\n    api\n      .getUserInfo()\n      .then(user => {\n        cardList\n                .setItemList(cards)\n                .setRenderer(item => buildCard(item, '#card',\n                        handleCardClick,\n                        handleCardLike,\n                        isOwner(item, user._id) ? handleCardDelete : null,\n                        didLike(item, user._id)))\n                .renderElements();\n      })\n      .catch(err => onRequestError(err, 'Failed to get user info.'));\n  })\n  .catch(err => onRequestError(err, 'Failed to get cards.'));\n\n\n/* Add event listeners to profile-edit and add-new-card buttons */\nprofileInfoEditButton.addEventListener('click', () => {\n  /* Fill inputs with values from the page and notify validator */\n  const {name, about} = userInfo.getUserInfo();\n  profileEditPopup.setInputValues({\n    'profile-name': name,\n    'profile-activity': about\n  });\n  editProfileFormValidator.notifyFormsAboutInputChange();\n\n  profileEditPopup.open();\n});\n\naddCardButton.addEventListener('click', () => {\n  addNewCardPopup.open();\n});\n\nupdateAvatarButton.addEventListener('click', () => {\n  avatarUpdatePopup.open();\n})\n"],"sourceRoot":""}